<app-userheaderafterlogin></app-userheaderafterlogin>
<!-- <div class="breadcrumb">
    <ul>
        <li><a routerLinkActive="true" routerLink="/user/user_view">Home</a></li>
        <li>&gt;</li>
        <li>Notifications</li>
    </ul>
</div> -->

<div class="bodyContainer">
    <div class="wrapperCustome">
        <app-usersidebar></app-usersidebar>
        <div class="col-sm-9 float-left">
    <div class="rightNotification">
      <div id="cover-spin" *ngIf="loader"></div>
      <mat-card>
        <div class="row" *ngIf="userData.length > 0">
          <div class="col-12 notify">Notifications
            <section class="example-section">
              <mat-checkbox  color="primary" (change)="$event ? masterToggle() : null"
                [checked]="selection.hasValue() && isAllSelected()"
                [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()">
              </mat-checkbox>&nbsp;
              <!-- <mat-checkbox class="example-margin"> -->
              <button mat-raised-button color="primary" (click)="delete()">
                Delete</button>
              <!-- </mat-checkbox> -->
            </section>
          </div>
        </div><br>
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

          <!-- Checkbox Column -->
          <ng-container matColumnDef="select">
            <th mat-header-cell *matHeaderCellDef>
              <mat-checkbox color="primary" (change)="$event ? masterToggle() : null"
                [checked]="selection.hasValue() && isAllSelected()"
                [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()">
              </mat-checkbox>
            </th>
            <td mat-cell *matCellDef="let row">
              <mat-checkbox color="primary" (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
                [checked]="selection.isSelected(row)" [aria-label]="checkboxLabel(row)">
              </mat-checkbox>
            </td>
          </ng-container>


          <!-- Name Column -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef class="notificationContainer"> Name </th>
            <td mat-cell *matCellDef="let row" class="notificationContainer"> 
              <ng-container *ngIf="row.subject == 'BookUpload'">
                                 <p class="m-0 p-0">New Book Uploaded</p>
                                 <!-- <small>New book uploaded at <strong>{{row.date | date:'dd-MM-yyyy h:mma'}}</strong></small> -->
              </ng-container>
              <ng-container *ngIf="row.subject == 'BuyBookPages'">
                <p class="m-0 p-0">New transaction has been done successfully</p>
                <!-- <small>New book uploaded at <strong>{{row.date | date:'dd-MM-yyyy h:mma'}}</strong></small> -->
               </ng-container>
               <ng-container *ngIf="row.subject == 'LinkShare'">
                <p class="m-0 p-0">Link shared</p>
                <!-- <small>New book uploaded at <strong>{{row.date | date:'dd-MM-yyyy h:mma'}}</strong></small> -->
               </ng-container>
               <ng-container *ngIf="row.subject == 'BuyBookPayment'">
                <p class="m-0 p-0">New payment has been done</p>
                <!-- <small>New book uploaded at <strong>{{row.date | date:'dd-MM-yyyy h:mma'}}</strong></small> -->
               </ng-container>
              <ng-container *ngIf="row.subject=='NewUserRegister' || row.subject=='NewPublisherRegister'">
                <p class="m-0 p-0">{{row.subject=='NewUserRegister' ? row.user_details?.name : row.publisher_details?.name}} has been registered as a {{row.subject=='NewUserRegister' ? 'user' : 'publisher'}}</p>
                <!-- <small>New registration at <strong>{{row.date | date:'dd-MM-yyyy h:mma'}}</strong></small> -->
              </ng-container>
              <ng-container *ngIf="row.subject=='UserBuyBookPayment'">
                <p class="m-0 p-0">
                  {{row.user_details?.name}} has made a payment of {{row.body}}/-</p>
                <!-- <small>New payment done on {{row.date | date:'dd-MM-yyyy h:mma'}}</small> -->

              </ng-container>
            </td>
          </ng-container>

          <!-- Weight Column -->
          <ng-container matColumnDef="date">
            <th mat-header-cell *matHeaderCellDef> Date </th>
            <td mat-cell *matCellDef="let row"> {{row.date | date:'MMM d, y'}}
              <!-- {{row.date | date:'MMM d, y h:mma'}} -->
            </td>
          </ng-container>

          <!-- Symbol Column -->
          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef> Symbol </th>
            <td mat-cell *matCellDef="let row"> 
              <button mat-icon-button (click)="got_book_details_page(row.book_id,row.publisher_id)">
                <mat-icon>north_east</mat-icon>
              </button>
            </td>
          </ng-container>

          <!-- <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr> -->
          <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selection.toggle(row)">
          </tr>
          
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" [attr.colspan]="'4'" class="text-center">
            <h4 class="my-3">No New Notifications Available</h4>
            <h5>If you have any notifications,they will appear here</h5>
          </td>
        </tr>
        </table>
        <mat-paginator #paginator [pageSizeOptions]="[10, 20, 30]" showFirstLastButtons></mat-paginator>  
        </mat-card>
      </div>
      </div>
      <br clear="all">
  </div>
</div>

<app-site-footer></app-site-footer>